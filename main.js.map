{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-31\",\r\n  headers: {\r\n    authorization: \"77631a48-9728-4c45-a993-b9b6adfc3678\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport function fetchUserData() {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((req) => {\r\n      console.log(\"Ошибка запроса\", req);\r\n    });\r\n}\r\n\r\nexport function fetchCards() {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((req) => {\r\n      console.log(\"Ошибка запроса\", req);\r\n    });\r\n}\r\n\r\nexport function fetchEditProfile(name, about) {\r\n  // обновление профиля пользователя\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  })\r\n    .then((res) => res.json())\r\n    .catch((req) => {\r\n      console.log(\"Ошибка запроса\", req);\r\n    });\r\n}\r\n\r\nexport function fetchAddCards(name, link) {\r\n  // добавление новых карточек\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  })\r\n    .then((res) => res.json())\r\n    .catch((req) => {\r\n      console.log(\"Ошибка запроса\", req);\r\n    });\r\n}\r\n\r\nexport const fetchDeleteCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  });\r\n};\r\n\r\nexport const fetchAddlike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => res.json())\r\n    .catch((req) => {\r\n      console.log(\"Ошибка поставновки лайка\", req);\r\n    });\r\n};\r\n\r\nexport const fetchDeletelike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((req) => {\r\n      console.log(\"Ошибка удаления лайка\", req);\r\n    });\r\n};\r\n\r\nexport const fetchAvatarData = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  });\r\n};\r\n","import { fetchDeleteCard, fetchAddlike, fetchDeletelike } from \"./api\";\r\n// создаю карточку, делаю копию контейнера и присваиваю все нужные значения\r\nconst cardTemplate = document.querySelector(\"#card-template\").content; // переменная хранящая темплейт\r\n\r\n//функция удаления карточек\r\nexport function deleteCard(cardElement, cardId) {\r\n  fetchDeleteCard(cardId)\r\n    .then(() => {\r\n      cardElement.remove(); // Удаляем элемент после успешного запроса\r\n    })\r\n    .catch((err) => console.error(\"Ошибка при удалении карточки:\", err));\r\n}\r\n\r\nexport function likeCard(cardElement, card, likeCount) {\r\n  if (!cardElement.classList.contains(\"card__like-button_is-active\")) {\r\n    fetchAddlike(card._id)\r\n      .then((res) => {\r\n        cardElement.classList.add(\"card__like-button_is-active\");\r\n        likeCount.textContent = res.likes.length; // обновляем количество лайков\r\n      })\r\n      .catch((err) => console.log(\"Ошибка поставновки лайка:\", err));\r\n  } else {\r\n    fetchDeletelike(card._id)\r\n      .then((res) => {\r\n        console.log(res);\r\n        cardElement.classList.remove(\"card__like-button_is-active\");\r\n        likeCount.textContent = res.likes.length; // обновляем количество лайков\r\n      })\r\n      .catch((err) => console.log(\"Ошибка удаления лайка:\", err));\r\n  }\r\n}\r\n\r\n// @todo: Функция создания карточки\r\nexport const createCard = (card, userID, likeCard, deleteCard, wiewImage) => {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true); //копия блока с его содержимым\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  cardImage.src = card.link; // ссылка на картинку\r\n  cardImage.alt = \"На картинке изображено: \" + card.name; // альт для каждой картинки\r\n  cardElement.querySelector(\".card__title\").textContent = card.name; // тайтл\r\n\r\n  // Обработчик клика для кнопки удаления\r\n\r\n  const buttonCardDelete = cardElement.querySelector(\".card__delete-button\"); // кнопка удаления\r\n  buttonCardDelete.addEventListener(\"click\", (evt) => {\r\n    evt.stopPropagation();\r\n    deleteCard(cardElement, card._id); // вызываем функцию удаления\r\n  });\r\n  // Проверка существования данных карточки\r\n  if (card && card.owner && card.owner._id) {\r\n    if (userID === card.owner._id) {\r\n      buttonCardDelete.style.display = \"block\";\r\n    } else {\r\n      buttonCardDelete.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  // Обработчик клика для кнопки лайка\r\n  const buttonLikeCard = cardElement.querySelector(\".card__like-button\");\r\n  buttonLikeCard.addEventListener(\"click\", (evt) => {\r\n    likeCard(evt.target, card, likeCount); // Вызываем функцию обработки лайка\r\n  });\r\n\r\n  let likeCount = cardElement.querySelector(\".card__like-counter\");\r\n  if (Array.isArray(card.likes) && card.likes.length > 0) {\r\n    likeCount.textContent = card.likes.length; // Если есть лайки, отображаем их количество\r\n    buttonLikeCard.classList.toggle(\r\n      \"card__like-button_is-active\",\r\n      card.likes.some((like) => like._id === userID)\r\n    ); //Отображаем лайки\r\n  } else {\r\n    likeCount.textContent = 0; // Если лайков нет, устанавливаем 0\r\n  }\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    wiewImage(card);\r\n  });\r\n\r\n  return cardElement; // возврат новых значений\r\n};\r\n","function closeByEscape(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    if (openedPopup) {\r\n      closePopup(openedPopup);\r\n    }\r\n  }\r\n}\r\n\r\nexport function openPopup(popup) {\r\n  popup.classList.add(\"popup_is-animated\");\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeByEscape);\r\n}\r\n\r\nexport function closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeByEscape);\r\n}\r\n\r\nexport function setPopupListeners() {\r\n  // Обработчик для закрытия попапа по клику на кнопку закрытия\r\n  document.querySelectorAll(\".popup\").forEach((popup) => {\r\n    const closeButton = popup.querySelector(\".popup__close\");\r\n    closeButton.addEventListener(\"click\", () => closePopup(popup));\r\n\r\n    // обработчик клика на оверлей\r\n    popup.addEventListener(\"click\", (evt) => {\r\n      // Проверяем, был ли клик по самому оверлею (внешнему контейнеру попапа)\r\n      if (evt.target === popup) {\r\n        closePopup(popup);\r\n      }\r\n    });\r\n  });\r\n}\r\n","// Функция для отображения ошибки ввода\r\nconst showInputError = (formElement, inputElement, errorMessage, config) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(config.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(config.errorClass);\r\n};\r\n\r\n// Функция для скрытия ошибки ввода\r\nconst hideInputError = (formElement, inputElement, config) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  errorElement.textContent = \"\";\r\n  errorElement.classList.remove(config.errorClass);\r\n  inputElement.classList.remove(config.inputErrorClass);\r\n};\r\n\r\n// Функция валидации ввода\r\nconst isValid = (formElement, inputElement, config) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      config\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, config);\r\n  }\r\n};\r\n\r\n// Функция для проверки наличия недействительных полей\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n// Функция для смены статуса кнопки\r\nconst swapButtonStatus = (inputList, buttonElement, config) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(config.inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.classList.remove(config.inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n};\r\n\r\n// Функция для установки обработчиков событий\r\nconst setEventListeners = (formElement, config) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(config.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  swapButtonStatus(inputList, buttonElement, config);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, config);\r\n      swapButtonStatus(inputList, buttonElement, config);\r\n    });\r\n  });\r\n};\r\n\r\n// Функция для включения валидации\r\nexport const enableValidation = (config) => {\r\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, config);\r\n  });\r\n};\r\n\r\n// Функция для очистки валидации\r\nexport const clearValidation = (formElement, config) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(config.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n\r\n  // Очищаем значения полей и скрываем ошибки\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.value = \"\"; // Сброс значения поля ввода\r\n    hideInputError(formElement, inputElement, config); // Скрываем ошибку ввода\r\n  });\r\n\r\n  // Блокируем кнопку и устанавливаем класс неактивной\r\n  buttonElement.classList.add(config.inactiveButtonClass);\r\n  buttonElement.disabled = true;\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard, deleteCard, likeCard } from \"./scripts/card\";\r\n\r\nimport { openPopup, closePopup, setPopupListeners } from \"./scripts/modal\";\r\n\r\nimport { enableValidation, clearValidation } from \"./scripts/validation\";\r\n\r\nimport {\r\n  fetchUserData,\r\n  fetchCards,\r\n  fetchEditProfile,\r\n  fetchAddCards,\r\n  fetchAvatarData,\r\n} from \"./scripts/api\";\r\n\r\nconst container = document.querySelector(\".places__list\"); // место куда добавляем\r\nconst editButton = document.querySelector(\".profile__edit-button\"); // кнопка редактирования профиля\r\nconst popupEdit = document.querySelector(\".popup_type_edit\"); // попап редактирования профиля\r\nconst profileButton = document.querySelector(\".profile__add-button\"); // кнопка добавления новой карточки\r\nconst popupEditImage = document.querySelector(\".profile__image\"); //аватар-кнопка\r\n//форма карточек\r\nconst newCardsForm = document.forms.new_place;\r\nconst namePlace = newCardsForm.elements.place_name;\r\nconst linkCard = newCardsForm.elements.link;\r\n//форма профиля\r\nconst profileForm = document.forms.edit_profile;\r\nconst nameInput = profileForm.elements.name;\r\nconst jobInput = profileForm.elements.description;\r\n// профиль редактирования\r\nconst nameElement = document.querySelector(\".profile__title\");\r\nconst jobElement = document.querySelector(\".profile__description\");\r\nconst newCard = document.querySelector(\".popup_type_new-card\"); // попап добавления новой карточки\r\n//попап карточки\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\nconst imagePopup = popupImage.querySelector(\".popup__image\");\r\nconst popupCartion = popupImage.querySelector(\".popup__caption\");\r\n\r\nconst popupAvatar = document.querySelector(\".popup_type_new-avatar\"); //попап аватара\r\n\r\n//форма смены аватара\r\nconst formAvatar = document.forms.new_avatar;\r\nconst inputAvatar = formAvatar.elements.new_avatar;\r\n\r\n// @todo: Вывести карточки на страницу\r\nconst addCard = (cardElement, container) => {\r\n  container.append(cardElement);\r\n};\r\n\r\nlet userID = null;\r\n\r\nconst loadData = () => {\r\n  Promise.all([fetchUserData(), fetchCards()])\r\n    .then(([userData, cards]) => {\r\n      userID = userData._id; // мое id\r\n      nameElement.textContent = userData.name; // обновляем имя\r\n      jobElement.textContent = userData.about; // обновляем описание\r\n\r\n      const avatarImageUrl = userData.avatar; // Получаем URL аватара\r\n      popupEditImage.style.backgroundImage = `url(${avatarImageUrl})`; // Устанавливаем аватар\r\n\r\n      return cards; // возвращаем массив карточек\r\n    })\r\n    .then((cards) => {\r\n      // используется новый массив из запроса к серверу\r\n      cards.forEach((card) => {\r\n        const newCard = createCard(\r\n          card,\r\n          userID,\r\n          likeCard,\r\n          deleteCard,\r\n          wiewImage\r\n        );\r\n        addCard(newCard, container); // добавляем карточку в контейнер\r\n      });\r\n    })\r\n    .catch((cards) =>\r\n      console.log(\"Ошибка вывода карточек на страницу:\", cards)\r\n    );\r\n};\r\n\r\nloadData();\r\n\r\nsetPopupListeners(); // вызов функции обработчика клика по оверлею и эскейп\r\n\r\nexport function wiewImage(cardImage) {\r\n  imagePopup.src = cardImage.link;\r\n  imagePopup.alt = cardImage.name;\r\n  popupCartion.textContent = cardImage.name;\r\n\r\n  openPopup(popupImage);\r\n}\r\n\r\nfunction fillFormWithProfileData() {\r\n  //заполняет поля формы значениями текущего имени и описания пользователя\r\n  nameInput.value = nameElement.textContent; // Заполняем поле имени\r\n  jobInput.value = jobElement.textContent; // Заполняем поле описания\r\n}\r\n\r\npopupEditImage.addEventListener(\"click\", () => {\r\n  openPopup(popupAvatar);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  fillFormWithProfileData(); //заполнение полей\r\n  clearValidation(profileForm, config);\r\n  openPopup(popupEdit);\r\n});\r\n\r\n// Обработчик «отправки» формы\r\nfunction handleProfileButton(evt) {\r\n  evt.preventDefault(); // Эта строчка отменяет стандартную отправку формы.\r\n  const profileButton = popupEdit.querySelector(\".popup__button\"); // Локальная переменная для кнопки\r\n  profileButton.textContent = \"Сохранение...\";\r\n\r\n  const nameValue = nameInput.value;\r\n  const jobValue = jobInput.value;\r\n\r\n  fetchEditProfile(nameValue, jobValue)\r\n    .then((data) => {\r\n      nameElement.textContent = data.name;\r\n      jobElement.textContent = data.about;\r\n      console.log(\"Профиль обновлен:\", data);\r\n      profileButton.textContent = \"Сохранить\";\r\n      closePopup(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      profileButton.textContent = \"Сохранить\";\r\n      console.error(\"Ошибка при обновлении профиля:\", error);\r\n    });\r\n}\r\n\r\n// Прикрепляем обработчик к форме:\r\n// он будет следить за событием “submit” - «отправка»\r\nprofileForm.addEventListener(\"submit\", handleProfileButton);\r\n\r\nprofileButton.addEventListener(\"click\", () => {\r\n  clearValidation(newCardsForm, config);\r\n  openPopup(newCard);\r\n});\r\n\r\n// Обработчик «отправки» формы\r\nfunction handleCardSubmit(evt) {\r\n  evt.preventDefault(); // Сброс дефолтных настроек\r\n  const cardButton = newCard.querySelector(\".popup__button\"); // Локальная переменная для кнопки\r\n  cardButton.textContent = \"Сохранение...\";\r\n\r\n  const newCardData = {\r\n    name: namePlace.value,\r\n    link: linkCard.value,\r\n  };\r\n\r\n  fetchAddCards(newCardData.name, newCardData.link)\r\n    .then((res) => {\r\n      const newCards = createCard(res, userID, likeCard, deleteCard, wiewImage);\r\n      container.prepend(newCards);\r\n      closePopup(newCard);\r\n      newCardsForm.reset();\r\n      cardButton.textContent = \"Сохранить\"; // Вернуть текст кнопки\r\n      console.log(res);\r\n    })\r\n    .catch((error) => {\r\n      cardButton.textContent = \"Сохранить\"; // Вернуть текст кнопки в случае ошибки\r\n      console.error(\"Ошибка при добавлении новой карточки:\", error);\r\n    });\r\n}\r\n\r\n// Добавляем обработчик события submit и передаем необходимые аргументы\r\nnewCardsForm.addEventListener(\"submit\", (evt) =>\r\n  handleCardSubmit(\r\n    evt,\r\n    newCardsForm,\r\n    container,\r\n    createCard,\r\n    deleteCard,\r\n    wiewImage,\r\n    likeCard\r\n  )\r\n);\r\n\r\nconst handleAvatarSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const avatarButton = popupAvatar.querySelector(\".popup__button\"); // Локальная переменная для кнопки\r\n  avatarButton.textContent = \"Сохранение...\";\r\n\r\n  const avatarValue = inputAvatar.value;\r\n\r\n  fetchAvatarData(avatarValue)\r\n    .then((res) => {\r\n      loadData();\r\n      console.log(\"Замена аватара успешна:\", res);\r\n      avatarButton.textContent = \"Сохранить\"; // Вернуть текст кнопки\r\n      closePopup(popupAvatar);\r\n      formAvatar.reset();\r\n    })\r\n    .catch((er) => {\r\n      avatarButton.textContent = \"Сохранить\"; // Вернуть текст кнопки в случае ошибки\r\n      console.log(\"Произошла ошибка в замене аватара:\", er);\r\n    });\r\n};\r\n\r\nformAvatar.addEventListener(\"submit\", handleAvatarSubmit);\r\n\r\n// включение валидации вызовом enableValidation\r\n// все настройки передаются при вызове\r\nconst config = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"form__input-error_active\",\r\n};\r\n\r\nenableValidation(config);\r\n\r\nconsole.log(fetchCards());\r\n"],"names":["config","baseUrl","headers","authorization","fetchCards","fetch","concat","method","then","res","json","catch","req","console","log","cardTemplate","document","querySelector","content","deleteCard","cardElement","cardId","fetchDeleteCard","remove","err","error","likeCard","card","likeCount","classList","contains","fetchDeletelike","_id","textContent","likes","length","add","createCard","userID","wiewImage","cloneNode","cardImage","src","link","alt","name","buttonCardDelete","addEventListener","evt","stopPropagation","owner","style","display","buttonLikeCard","target","Array","isArray","toggle","some","like","closeByEscape","key","openedPopup","closePopup","openPopup","popup","removeEventListener","hideInputError","formElement","inputElement","errorElement","id","errorClass","inputErrorClass","swapButtonStatus","inputList","buttonElement","validity","valid","hasInvalidInput","inactiveButtonClass","disabled","clearValidation","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","value","container","editButton","popupEdit","profileButton","popupEditImage","newCardsForm","forms","new_place","namePlace","elements","place_name","linkCard","profileForm","edit_profile","nameInput","jobInput","description","nameElement","jobElement","newCard","popupImage","imagePopup","popupCartion","popupAvatar","formAvatar","new_avatar","inputAvatar","loadData","Promise","all","_ref","_ref2","userData","cards","about","avatarImageUrl","avatar","backgroundImage","append","addCard","preventDefault","body","JSON","stringify","data","cardButton","newCardData","newCards","prepend","reset","handleCardSubmit","avatarButton","er","formSelector","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation"],"sourceRoot":""}